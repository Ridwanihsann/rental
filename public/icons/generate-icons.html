<!DOCTYPE html>
<html>
<head>
    <title>Generate PWA Icons</title>
    <style>
        body { font-family: sans-serif; padding: 20px; background: #1a1a2e; color: white; }
        .icons { display: flex; flex-wrap: wrap; gap: 20px; margin-top: 20px; }
        .icon-item { text-align: center; }
        canvas { border: 1px solid #333; border-radius: 8px; }
        button { background: #6366F1; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-size: 16px; margin: 5px; }
        button:hover { background: #5558e8; }
        h1 { color: #818CF8; }
        .instructions { background: #2a2a4e; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
    </style>
</head>
<body>
    <h1>PWA Icon Generator</h1>
    <div class="instructions">
        <p><strong>Instruksi:</strong></p>
        <ol>
            <li>Klik "Generate All Icons" untuk membuat semua ukuran icon</li>
            <li>Klik "Download All" untuk mengunduh semua icon sekaligus</li>
            <li>Atau klik icon individual untuk mengunduh satu per satu</li>
            <li>Pindahkan file yang diunduh ke folder <code>public/icons/</code></li>
        </ol>
    </div>
    <button onclick="generateAll()">Generate All Icons</button>
    <button onclick="downloadAll()">Download All</button>
    <div class="icons" id="icons"></div>

    <script>
        const sizes = [72, 96, 128, 144, 152, 192, 384, 512];
        const svgContent = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
            <defs>
                <linearGradient id="bg" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" style="stop-color:#818CF8"/>
                    <stop offset="100%" style="stop-color:#6366F1"/>
                </linearGradient>
            </defs>
            <rect width="512" height="512" rx="80" fill="url(#bg)"/>
            <circle cx="256" cy="256" r="120" fill="none" stroke="white" stroke-width="24"/>
            <circle cx="256" cy="256" r="60" fill="white"/>
            <circle cx="256" cy="256" r="30" fill="#6366F1"/>
            <path d="M380 180 L420 140 L420 180 M420 140 L380 140" stroke="white" stroke-width="16" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
            <path d="M132 332 L92 372 L92 332 M92 372 L132 372" stroke="white" stroke-width="16" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
        </svg>`;
        
        const canvases = {};
        
        function generateIcon(size) {
            return new Promise((resolve) => {
                const canvas = document.createElement('canvas');
                canvas.width = size;
                canvas.height = size;
                const ctx = canvas.getContext('2d');
                
                const img = new Image();
                const blob = new Blob([svgContent], {type: 'image/svg+xml'});
                const url = URL.createObjectURL(blob);
                
                img.onload = () => {
                    ctx.drawImage(img, 0, 0, size, size);
                    URL.revokeObjectURL(url);
                    canvases[size] = canvas;
                    resolve(canvas);
                };
                img.src = url;
            });
        }
        
        async function generateAll() {
            const container = document.getElementById('icons');
            container.innerHTML = '';
            
            for (const size of sizes) {
                const canvas = await generateIcon(size);
                const div = document.createElement('div');
                div.className = 'icon-item';
                div.innerHTML = `<p>icon-${size}x${size}.png</p>`;
                div.appendChild(canvas);
                
                const btn = document.createElement('button');
                btn.textContent = 'Download';
                btn.onclick = () => downloadIcon(size);
                div.appendChild(btn);
                
                container.appendChild(div);
            }
        }
        
        function downloadIcon(size) {
            const canvas = canvases[size];
            if (!canvas) return;
            
            const link = document.createElement('a');
            link.download = `icon-${size}x${size}.png`;
            link.href = canvas.toDataURL('image/png');
            link.click();
        }
        
        async function downloadAll() {
            for (const size of sizes) {
                if (!canvases[size]) await generateIcon(size);
                downloadIcon(size);
                await new Promise(r => setTimeout(r, 200)); // Small delay between downloads
            }
        }
    </script>
</body>
</html>
